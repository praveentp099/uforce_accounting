{% extends 'base.html' %}
{% load auth_extras %}

{% block title %}Files | uForce Accounting{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1><i class="fas fa-file-invoice"></i> Quotation Files</h1>
    {% if user|has_role:'admin,owner' %}
    <a href="{% url 'quotation_create' %}" class="btn btn-primary"><i class="fas fa-upload"></i> Upload Quotation</a>
    {% endif %}
</div>

<div class="row">
    <!-- Pending Column -->
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-warning text-dark"><h5><i class="fas fa-hourglass-half"></i> Pending</h5></div>
            <div class="card-body">
                {% for quote in pending_quotations %}
                    {% include 'quotations/partials/_quotation_card.html' with quotation=quote %}
                {% empty %}
                    <p class="text-muted">No pending quotations.</p>
                {% endfor %}
            </div>
        </div>
    </div>
    <!-- Approved Column -->
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-success text-white"><h5><i class="fas fa-check-circle"></i> Approved</h5></div>
            <div class="card-body">
                {% for quote in approved_quotations %}
                    {% include 'quotations/partials/_quotation_card.html' with quotation=quote %}
                {% empty %}
                    <p class="text-muted">No approved quotations.</p>
                {% endfor %}
            </div>
        </div>
    </div>
    <!-- Revised Column -->
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-info text-white"><h5><i class="fas fa-sync-alt"></i> Revised</h5></div>
            <div class="card-body">
                {% for quote in revised_quotations %}
                    {% include 'quotations/partials/_quotation_card.html' with quotation=quote %}
                {% empty %}
                    <p class="text-muted">No revised quotations.</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
